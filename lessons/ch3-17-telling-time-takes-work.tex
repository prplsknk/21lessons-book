\chapter{Donner l'heure demande du travail}
\label{les:17}

\begin{chapquote}{Lewis Carroll, \textit{Alice au pays des merveilles}}
\enquote{Oh, mon Dieu ! Oh, mon Dieu ! Je vais être en retard !}
\end{chapquote}

On dit souvent qu'on mine des bitcoins parce que des milliers d'ordinateurs
travaillent à résoudre des problèmes mathématiques \textit{très complexes}. Des
problèmes doivent êtres résolus et si vous calculez la bonne réponse, vous
\enquote{produisez} un bitcoin. Bien que cette vision simplifiée du minage de
bitcoin soit plus facile à exprimer, elle passe un peu à côté du sujet. Les
bitcoins ne sont pas produits ou créés et toute la difficulté ne consiste pas
réellement à résoudre certains problèmes de maths. En plus, les maths en
question ne sont pas particulièrement complexes. Ce qui l'est, c'est de
\textit{donner l'heure} dans un système décentralisé.

Comme le démontre le livre blanc, le système de preuve de travail (alias le
minage) est une manière d'implémenter un serveur d'horodatage distribué.

\begin{figure}
  \includegraphics{assets/images/bitcoin-whitepaper-timestamp-wide.png}
  \caption{Extraits du livre blanc. Ai-je entendu \enquote{timechain} ?}
  \label{fig:bitcoin-whitepaper-timestamp-wide}
\end{figure}

Au début, lorsque j'étudiais le fonctionnement de Bitcoin, j'ai moi aussi pensé
que la preuve de travail était inefficace et générait du gaspillage. Au bout
d'un moment, j'ai commencé à changer de point de vue sur la consommation
d'énergie de Bitcoin~\cite{gigi:energy}. Il semblerait qu'aujourd'hui, en l'an
10 ap. B (après Bitcoin), la preuve de travail soit toujours largement
incomprise.

Beaucoup de gens semblent croire que c'est un travail \textit{inutile}, puisque
les problèmes à résoudre par la preuve de travail sont inventés. Si l'on se
focalise uniquement sur les calculs, c'est compréhensible d'arriver à cette
conclusion. Mais Bitcoin n'est pas une question de calculs. C'est une question
de \textit{s'accorder indépendamment sur l'ordre des choses}.

La preuve de travail est un système dans lequel chacun peut valider ce qui s'est
passé et dans quel ordre. Cette validation indépendante est la source du
consensus, un accord unique entre de multiples parties à propos de qui possède
quoi.

Dans un environnement radicalement décentralisé, nous ne possédons pas le luxe
du temps absolu. Toute horloge aurait pour effet d'introduire une tierce partie,
un point central du système qui pourrait être attaqué et sur lequel il faudrait
se reposer. \enquote{La mesure du temps est le problème fondamental}, comme le
souligne Grisha Trubetskoy~\cite{pow-clock}. Et Satoshi a brillamment résolu ce
problème en proposant l'implémentation d'une horloge décentralisée via une
chaîne de blocs par preuve de travail. Chacun accepte préalablement que la
source de vérité provient de la chaîne avec le plus de travail cumulé. C'est
littéralement ce qui s'est passé. Cette entente est dorénavant connue sous le
nom de consensus de Nakamoto.

\begin{quotation}\begin{samepage}
\enquote{Le réseau horodate les transactions en les hachant en une chaîne
continue de preuves de travail [...] (qui) sert de preuve par témoignage de la
séquence des événements}
\begin{flushright} -- Satoshi Nakamoto\footnote{Satoshi Nakamoto, livre blanc de
Bitcoin~\cite{whitepaper}}
\end{flushright}\end{samepage}\end{quotation}

Sans moyen constant pour donner l'heure, il n'existe pas de manière cohérente de
distinguer l'avant de l'après. Un ordre fiable est impossible. Comme nous
l'avons vu, le consensus de Nakamoto est le chemin qu'a pris Bitcoin pour donner
l'heure continuellement. La structure incitative du système produit une horloge
probabiliste et décentralisée en se servant à la fois de la cupidité et de
l'intérêt personnel des participants qui se concurrencent. L'imprécision de
cette horloge n'a aucune importance car à la fin, l'ordre des événements est
indiscutable et chacun peut le vérifier.

Grâce à la preuve de travail, la décentralisation radicale touche à la fois le
travail \textit{et} la vérification du travail. Chacun peut rejoindre et quitter
le réseau à volonté et chacun peut vérifier tout, tout le temps. Non seulement
ça, mais chacun peut vérifier l'état du système \textit{personnellement}, sans
devoir se fier à quiconque.

Ça prend du temps de comprendre la preuve de travail. C'est bien souvent
contre-intuitif et malgré les règles simples, ça donne lieu à des phénomènes
plutôt complexes. Personnellement, me focaliser sur le minage m'a aidé. C'est
utile, pas inutile. La vérification, pas les calculs. C'est du temps, pas des
blocs.

\paragraph{Bitcoin m'a appris que c'était délicat de donner l'heure, surtout
quand on est décentralisé.}

% ---
%
% #### Through the Looking-Glass
%
% - [Bitcoin's Energy Consumption: A shift in perspective][energy]
%
% #### Down the Rabbit Hole
%
% - [Blockchain Proof-of-Work Is a Decentralized Clock][points out] by Gregory Trubetskoy
% - [The Anatomy of Proof-of-Work][pow-anatomy] by Hugo Nguyen
% - [PoW is efficient][pow-efficient] by Dan Held
% - [Mining][bw-mining], [Controlled supply][bw-supply] on the Bitcoin Wiki
%
% [points out]: https://grisha.org/blog/2018/01/23/explaining-proof-of-work/
% [energy]: {% post_url /bitcoin/2018-06-10-bitcoin-s-energy-consumption %}
% [whitepaper]: https://bitcoin.org/bitcoin.pdf
%
% [pow-efficient]: https://blog.picks.co/pow-is-efficient-aa3d442754d3
% [pow-anatomy]: https://bitcointechtalk.com/the-anatomy-of-proof-of-work-98c85b6f6667
% [bw-mining]: https://en.bitcoin.it/wiki/Mining
% [bw-supply]: https://en.bitcoin.it/wiki/Controlled_supply
%
% <!-- Wikipedia -->
% [alice]: https://en.wikipedia.org/wiki/Alice%27s_Adventures_in_Wonderland
% [carroll]: https://en.wikipedia.org/wiki/Lewis_Carroll
